{"ast":null,"code":"// frontend/src/components/Navbar.js\nimport React,{useState,useEffect}from'react';import{AppBar,Toolbar,Typography,Button,Box}from'@mui/material';import{Link as RouterLink,useNavigate}from'react-router-dom';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function Navbar(){const[isLoggedIn,setIsLoggedIn]=useState(false);const[isAdmin,setIsAdmin]=useState(false);const navigate=useNavigate();useEffect(()=>{const checkAuthStatus=async()=>{const token=localStorage.getItem('token');console.log('Checking auth with token:',token);if(token){try{const response=await fetch('http://localhost:3001/api/auth/profile',{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();console.log('Profile response:',data);// Debug log\nif(response.ok){setIsLoggedIn(true);setIsAdmin(data.isAdmin===true);// Explicitly check boolean\nconsole.log('Is admin?',data.isAdmin);// Debug log\n}else{console.log('Auth check failed:',data);localStorage.removeItem('token');setIsLoggedIn(false);setIsAdmin(false);}}catch(error){console.error('Auth check error:',error);setIsLoggedIn(false);setIsAdmin(false);}}};checkAuthStatus();},[]);const handleLogout=()=>{localStorage.removeItem('token');setIsLoggedIn(false);setIsAdmin(false);navigate('/login');};return/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"Reading Community\"}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Button,{color:\"inherit\",component:RouterLink,to:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",component:RouterLink,to:\"/books\",children:\"Books\"}),isLoggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"inherit\",component:RouterLink,to:\"/profile\",children:\"Profile\"}),isAdmin&&/*#__PURE__*/_jsx(Button,{color:\"inherit\",component:RouterLink,to:\"/admin\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"inherit\",component:RouterLink,to:\"/login\",children:\"Login\"}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",component:RouterLink,to:\"/register\",children:\"Register\"})]})]})]})});}export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Toolbar","Typography","Button","Box","Link","RouterLink","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Navbar","isLoggedIn","setIsLoggedIn","isAdmin","setIsAdmin","navigate","checkAuthStatus","token","localStorage","getItem","console","log","response","fetch","headers","data","json","ok","removeItem","error","handleLogout","position","children","variant","component","sx","flexGrow","color","to","onClick"],"sources":["/Users/BrooksCole/Documents/reading-community/frontend/src/components/Navbar.js"],"sourcesContent":["// frontend/src/components/Navbar.js\nimport React, { useState, useEffect } from 'react';\nimport { AppBar, Toolbar, Typography, Button, Box } from '@mui/material';\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\n\nfunction Navbar() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const checkAuthStatus = async () => {\n      const token = localStorage.getItem('token');\n      console.log('Checking auth with token:', token);\n\n      if (token) {\n        try {\n          const response = await fetch('http://localhost:3001/api/auth/profile', {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          \n          const data = await response.json();\n          console.log('Profile response:', data);  // Debug log\n\n          if (response.ok) {\n            setIsLoggedIn(true);\n            setIsAdmin(data.isAdmin === true);  // Explicitly check boolean\n            console.log('Is admin?', data.isAdmin);  // Debug log\n          } else {\n            console.log('Auth check failed:', data);\n            localStorage.removeItem('token');\n            setIsLoggedIn(false);\n            setIsAdmin(false);\n          }\n        } catch (error) {\n          console.error('Auth check error:', error);\n          setIsLoggedIn(false);\n          setIsAdmin(false);\n        }\n      }\n    };\n\n    checkAuthStatus();\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setIsLoggedIn(false);\n    setIsAdmin(false);\n    navigate('/login');\n  };\n\n  return (\n    <AppBar position=\"static\">\n      <Toolbar>\n        <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n          Reading Community\n        </Typography>\n        <Box>\n          <Button color=\"inherit\" component={RouterLink} to=\"/\">\n            Home\n          </Button>\n          <Button color=\"inherit\" component={RouterLink} to=\"/books\">\n            Books\n          </Button>\n          {isLoggedIn ? (\n            <>\n              <Button color=\"inherit\" component={RouterLink} to=\"/profile\">\n                Profile\n              </Button>\n              {isAdmin && (\n                <Button color=\"inherit\" component={RouterLink} to=\"/admin\">\n                  Admin Dashboard\n                </Button>\n              )}\n              <Button color=\"inherit\" onClick={handleLogout}>\n                Logout\n              </Button>\n            </>\n          ) : (\n            <>\n              <Button color=\"inherit\" component={RouterLink} to=\"/login\">\n                Login\n              </Button>\n              <Button color=\"inherit\" component={RouterLink} to=\"/register\">\n                Register\n              </Button>\n            </>\n          )}\n        </Box>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default Navbar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}