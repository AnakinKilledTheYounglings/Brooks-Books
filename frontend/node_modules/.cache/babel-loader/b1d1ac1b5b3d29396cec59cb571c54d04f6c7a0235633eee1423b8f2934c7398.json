{"ast":null,"code":"import config from '../config/config';\nclass ApiService {\n  constructor() {\n    this.baseUrl = config.apiUrl;\n    this.getHeaders = () => ({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    });\n  }\n\n  // Auth endpoints\n  async login(credentials) {\n    const response = await fetch(`${this.baseUrl}/api/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(credentials)\n    });\n    return this.handleResponse(response);\n  }\n  async register(userData) {\n    const response = await fetch(`${this.baseUrl}/api/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    });\n    return this.handleResponse(response);\n  }\n\n  // Book endpoints\n  async getBooks() {\n    const response = await fetch(`${this.baseUrl}/api/books`);\n    return this.handleResponse(response);\n  }\n  async uploadDrawing(bookId, file) {\n    const formData = new FormData();\n    formData.append('drawing', file);\n    const response = await fetch(`${this.baseUrl}/api/books/${bookId}/drawings`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: formData\n    });\n    return this.handleResponse(response);\n  }\n\n  // Profile endpoints\n  async getProfile() {\n    const response = await fetch(`${this.baseUrl}/api/auth/profile`, {\n      headers: this.getHeaders()\n    });\n    return this.handleResponse(response);\n  }\n  async updateProfilePhoto(file) {\n    const formData = new FormData();\n    formData.append('photo', file);\n    const response = await fetch(`${this.baseUrl}/api/auth/profile/photo`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: formData\n    });\n    return this.handleResponse(response);\n  }\n\n  // Helper method to handle responses\n  async handleResponse(response) {\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || 'Something went wrong');\n    }\n    return data;\n  }\n}\nexport default new ApiService();","map":{"version":3,"names":["config","ApiService","constructor","baseUrl","apiUrl","getHeaders","localStorage","getItem","login","credentials","response","fetch","method","headers","body","JSON","stringify","handleResponse","register","userData","getBooks","uploadDrawing","bookId","file","formData","FormData","append","getProfile","updateProfilePhoto","data","json","ok","Error","error"],"sources":["/Users/BrooksCole/Documents/reading-community/frontend/src/services/apiService.js"],"sourcesContent":["import config from '../config/config';\n\nclass ApiService {\n  constructor() {\n    this.baseUrl = config.apiUrl;\n    this.getHeaders = () => ({\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    });\n  }\n\n  // Auth endpoints\n  async login(credentials) {\n    const response = await fetch(`${this.baseUrl}/api/auth/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(credentials)\n    });\n    return this.handleResponse(response);\n  }\n\n  async register(userData) {\n    const response = await fetch(`${this.baseUrl}/api/auth/register`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(userData)\n    });\n    return this.handleResponse(response);\n  }\n\n  // Book endpoints\n  async getBooks() {\n    const response = await fetch(`${this.baseUrl}/api/books`);\n    return this.handleResponse(response);\n  }\n\n  async uploadDrawing(bookId, file) {\n    const formData = new FormData();\n    formData.append('drawing', file);\n\n    const response = await fetch(`${this.baseUrl}/api/books/${bookId}/drawings`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: formData\n    });\n    return this.handleResponse(response);\n  }\n\n  // Profile endpoints\n  async getProfile() {\n    const response = await fetch(`${this.baseUrl}/api/auth/profile`, {\n      headers: this.getHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  async updateProfilePhoto(file) {\n    const formData = new FormData();\n    formData.append('photo', file);\n\n    const response = await fetch(`${this.baseUrl}/api/auth/profile/photo`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: formData\n    });\n    return this.handleResponse(response);\n  }\n\n  // Helper method to handle responses\n  async handleResponse(response) {\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || 'Something went wrong');\n    }\n    return data;\n  }\n}\n\nexport default new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}