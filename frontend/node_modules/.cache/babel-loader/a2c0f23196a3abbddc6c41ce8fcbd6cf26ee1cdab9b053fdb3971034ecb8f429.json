{"ast":null,"code":"var _jsxFileName = \"/Users/BrooksCole/Documents/reading-community/frontend/src/pages/AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/pages/AdminDashboard.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Container, Typography, Box, Card, CardContent, Button, TextField, Grid, Tab, Tabs, IconButton, Chip, Upload, CircularProgress, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\nimport { Delete, Edit, Add, CloudUpload } from '@mui/icons-material';\nimport { GENRES } from '../constants/bookConstants';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VocabularyManagement = () => {\n  _s();\n  const [vocabularyWords, setVocabularyWords] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [openUploadDialog, setOpenUploadDialog] = useState(false);\n  useEffect(() => {\n    fetchVocabularyWords();\n  }, []);\n  const fetchVocabularyWords = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/vocabulary', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await response.json();\n      setVocabularyWords(data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching vocabulary:', error);\n      setLoading(false);\n    }\n  };\n  const handleDeleteWord = async wordId => {\n    if (window.confirm('Are you sure you want to delete this word?')) {\n      try {\n        const response = await fetch(`http://localhost:3001/api/vocabulary/${wordId}`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.ok) {\n          fetchVocabularyWords();\n        }\n      } catch (error) {\n        console.error('Error deleting word:', error);\n      }\n    }\n  };\n\n  // Render a sample Excel format for users\n  const sampleExcelFormat = `\n    Word | Definition | Example Sentence\n    happy | feeling or showing pleasure | She was happy to see her friends.\n    brave | ready to face danger | The brave firefighter saved the cat.\n    curious | eager to learn | The curious student asked many questions.\n  `;\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3,\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        startIcon: /*#__PURE__*/_jsxDEV(Upload, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 22\n        }, this),\n        onClick: () => setOpenUploadDialog(true),\n        children: \"Upload Vocabulary (Excel/CSV)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        mb: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"Sample Excel Format\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          style: {\n            backgroundColor: '#f5f5f5',\n            padding: '1rem',\n            borderRadius: '4px',\n            whiteSpace: 'pre-wrap'\n          },\n          children: sampleExcelFormat\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: vocabularyWords.map(word => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'start'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  children: word.word\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  color: \"textSecondary\",\n                  children: [\"Book: \", word.bookId ? word.bookId.title : 'N/A']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  sx: {\n                    mt: 1\n                  },\n                  children: [\"Definition: \", word.definition]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 23\n                }, this), word.etymology && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: [\"Etymology: \", word.etymology.root, \" (\", word.etymology.originLanguage, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  onClick: () => handleDeleteWord(word._id),\n                  color: \"error\",\n                  children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this)\n      }, word._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openUploadDialog,\n      onClose: () => setOpenUploadDialog(false),\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Upload Vocabulary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          gutterBottom: true,\n          sx: {\n            mt: 1\n          },\n          children: \"Upload an Excel file (.xlsx) or CSV file with your vocabulary words. Please ensure it follows the format shown in the example above.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          component: \"label\",\n          sx: {\n            mt: 2\n          },\n          children: [\"Choose File\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            hidden: true,\n            accept: \".xlsx,.csv\",\n            onChange: async e => {\n              const file = e.target.files[0];\n              if (file) {\n                const formData = new FormData();\n                formData.append('file', file);\n                try {\n                  const response = await fetch('http://localhost:3001/api/vocabulary/upload', {\n                    method: 'POST',\n                    headers: {\n                      'Authorization': `Bearer ${localStorage.getItem('token')}`\n                    },\n                    body: formData\n                  });\n                  if (response.ok) {\n                    setOpenUploadDialog(false);\n                    fetchVocabularyWords();\n                  }\n                } catch (error) {\n                  console.error('Error uploading vocabulary:', error);\n                }\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpenUploadDialog(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(VocabularyManagement, \"GRwWG750JPiMdA/H8ftwd+8iDQ8=\");\n_c = VocabularyManagement;\nfunction AdminDashboard() {\n  _s2();\n  const [activeTab, setActiveTab] = useState(0);\n  const [books, setBooks] = useState([]);\n  const [openBookDialog, setOpenBookDialog] = useState(false);\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [bookFormData, setBookFormData] = useState({\n    title: '',\n    author: '',\n    description: '',\n    genres: [],\n    tags: [],\n    tagInput: '',\n    ageRange: {\n      min: 8,\n      max: 15\n    }\n  });\n  const [stats, setStats] = useState({\n    totalBooks: 0,\n    totalDrawings: 0,\n    activeUsers: 0\n  });\n\n  // First, make fetchBooks a useCallback\n  const fetchBooks = useCallback(async () => {\n    try {\n      //console.log('Fetching books...');\n      const response = await fetch('http://localhost:3001/api/books');\n      const data = await response.json();\n      //console.log('Books fetched:', data);\n      setBooks(data);\n      //setLoading(false);\n    } catch (error) {\n      console.error('Error fetching books:', error);\n      //setError('Failed to load books');\n      //setLoading(false);\n    }\n  }, []); // Empty dependency array since it doesn't depend on state\n\n  const fetchStats = useCallback(async () => {\n    try {\n      // Calculate stats from books data\n      const statsData = {\n        totalBooks: books.length,\n        totalDrawings: books.reduce((sum, book) => {\n          var _book$drawings;\n          return sum + (((_book$drawings = book.drawings) === null || _book$drawings === void 0 ? void 0 : _book$drawings.length) || 0);\n        }, 0),\n        activeUsers: new Set(books.flatMap(book => (book.drawings || []).map(drawing => drawing.userId))).size,\n        booksPerAgeGroup: books.reduce((acc, book) => {\n          const range = `${book.ageRange.min}-${book.ageRange.max}`;\n          acc[range] = (acc[range] || 0) + 1;\n          return acc;\n        }, {})\n      };\n      setStats(statsData);\n      console.log('Updated stats:', statsData); // Debug log\n    } catch (error) {\n      console.error('Error calculating stats:', error);\n    }\n  }, [books]);\n\n  // Make sure this useEffect is present\n  useEffect(() => {\n    fetchStats();\n  }, [books, fetchStats]);\n  useEffect(() => {\n    console.log('Starting to fetch books');\n    fetchBooks();\n  }, [fetchBooks]);\n  const handleBookSubmit = async e => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      console.log('Auth token:', token);\n      console.log('Selected book:', selectedBook);\n\n      // Ensure bookFormData.tags is an array\n      const existingTags = Array.isArray(bookFormData.tags) ? bookFormData.tags : [];\n\n      // Process the new tags\n      const newTags = bookFormData.tagInput ? bookFormData.tagInput.split(',').map(tag => tag.trim()).filter(tag => tag) : [];\n\n      // Combine existing and new tags, remove duplicates\n      const allTags = [...new Set([...existingTags, ...newTags])];\n      const dataToSend = {\n        ...bookFormData,\n        tags: allTags\n      };\n      delete dataToSend.tagInput;\n      const url = selectedBook ? `http://localhost:3001/api/books/${selectedBook._id}` : 'http://localhost:3001/api/books';\n      const method = selectedBook ? 'PUT' : 'POST';\n      console.log('Sending request:', {\n        url,\n        method,\n        data: dataToSend\n      });\n\n      // Before the fetch\n      console.log('About to send:', {\n        url,\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: dataToSend\n      });\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(dataToSend)\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        console.error('Server response:', text);\n        throw new Error(`Server error: ${text}`);\n      }\n      const data = await response.json();\n      console.log('Success response:', data);\n      console.log('Response status:', response.status);\n      console.log('Response headers:', [...response.headers.entries()]);\n      setOpenBookDialog(false);\n      fetchBooks();\n      setSelectedBook(null);\n      setBookFormData({\n        title: '',\n        author: '',\n        description: '',\n        genres: [],\n        tags: [],\n        tagInput: '',\n        ageRange: {\n          min: 8,\n          max: 15\n        }\n      });\n    } catch (error) {\n      console.error('Error saving book:', error);\n      alert('Failed to save book: ' + error.message);\n    }\n  };\n\n  // In your AdminDashboard.js, update the handleBookSubmit function:\n\n  // Add genre field to the dialog form:\n  /*#__PURE__*/_jsxDEV(TextField, {\n    fullWidth: true,\n    label: \"Genre\",\n    value: bookFormData.genre || '',\n    onChange: e => setBookFormData({\n      ...bookFormData,\n      genre: e.target.value\n    }),\n    margin: \"normal\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 361,\n    columnNumber: 3\n  }, this);\n  const handleDeleteBook = async bookId => {\n    if (window.confirm('Are you sure you want to delete this book?')) {\n      try {\n        const response = await fetch(`http://localhost:3001/api/books/${bookId}`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.ok) {\n          fetchBooks();\n        }\n      } catch (error) {\n        console.error('Error deleting book:', error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    sx: {\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n      value: activeTab,\n      onChange: (e, newValue) => setActiveTab(newValue),\n      sx: {\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        label: \"Books Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        label: \"Statistics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        label: \"Content Moderation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        label: \"Vocabulary Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this), activeTab === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 26\n          }, this),\n          onClick: () => {\n            setSelectedBook(null);\n            setBookFormData({\n              title: '',\n              author: '',\n              description: '',\n              ageRange: {\n                min: 8,\n                max: 15\n              }\n            });\n            setOpenBookDialog(true);\n          },\n          children: \"Add New Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this), activeTab === 3 && /*#__PURE__*/_jsxDEV(Box, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"Vocabulary Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(VocabularyManagement, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: books.map(book => {\n          var _book$drawings2;\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'start'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h6\",\n                      children: book.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 436,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      color: \"textSecondary\",\n                      children: book.author\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 437,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      sx: {\n                        mt: 1\n                      },\n                      children: [\"Age Range: \", book.ageRange.min, \"-\", book.ageRange.max]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 438,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      children: [\"Drawings: \", ((_book$drawings2 = book.drawings) === null || _book$drawings2 === void 0 ? void 0 : _book$drawings2.length) || 0]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 441,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 435,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                      onClick: () => {\n                        setSelectedBook(book);\n                        setBookFormData({\n                          title: book.title,\n                          author: book.author,\n                          description: book.description,\n                          genres: book.genres || [],\n                          tags: book.tags || [],\n                          ageRange: book.ageRange\n                        });\n                        setOpenBookDialog(true);\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 460,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 446,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                      onClick: () => handleDeleteBook(book._id),\n                      color: \"error\",\n                      children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 463,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 445,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)\n          }, book._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), activeTab === 1 && /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        children: \"Platform Statistics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                color: \"textSecondary\",\n                gutterBottom: true,\n                children: \"Total Books\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h4\",\n                children: stats.totalBooks\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                color: \"textSecondary\",\n                gutterBottom: true,\n                children: \"Total Drawings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h4\",\n                children: stats.totalDrawings\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                color: \"textSecondary\",\n                gutterBottom: true,\n                children: \"Active Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h4\",\n                children: stats.activeUsers\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openBookDialog,\n      onClose: () => setOpenBookDialog(false),\n      maxWidth: \"sm\",\n      fullWidth: true,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        component: \"form\",\n        onSubmit: handleBookSubmit,\n        sx: {\n          p: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: selectedBook ? 'Edit Book' : 'Add New Book'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Title\",\n          value: bookFormData.title,\n          onChange: e => setBookFormData({\n            ...bookFormData,\n            title: e.target.value\n          }),\n          margin: \"normal\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Author\",\n          value: bookFormData.author,\n          onChange: e => setBookFormData({\n            ...bookFormData,\n            author: e.target.value\n          }),\n          margin: \"normal\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Description\",\n          value: bookFormData.description,\n          onChange: e => setBookFormData({\n            ...bookFormData,\n            description: e.target.value\n          }),\n          margin: \"normal\",\n          multiline: true,\n          rows: 3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: \"Genres\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              gap: 1,\n              flexWrap: 'wrap'\n            },\n            children: GENRES.map(genre => {\n              var _bookFormData$genres, _bookFormData$genres2;\n              return /*#__PURE__*/_jsxDEV(Chip, {\n                label: genre,\n                onClick: () => {\n                  const currentGenres = bookFormData.genres || [];\n                  if (currentGenres.includes(genre)) {\n                    setBookFormData({\n                      ...bookFormData,\n                      genres: currentGenres.filter(g => g !== genre)\n                    });\n                  } else {\n                    setBookFormData({\n                      ...bookFormData,\n                      genres: [...currentGenres, genre]\n                    });\n                  }\n                },\n                color: (_bookFormData$genres = bookFormData.genres) !== null && _bookFormData$genres !== void 0 && _bookFormData$genres.includes(genre) ? \"primary\" : \"default\",\n                variant: (_bookFormData$genres2 = bookFormData.genres) !== null && _bookFormData$genres2 !== void 0 && _bookFormData$genres2.includes(genre) ? \"filled\" : \"outlined\"\n              }, genre, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: \"Tags\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Add tags (comma-separated)\",\n            value: bookFormData.tagInput || '',\n            onChange: e => {\n              setBookFormData({\n                ...bookFormData,\n                tagInput: e.target.value\n              });\n            },\n            helperText: \"Enter new tags separated by commas, they will be added when you save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this), bookFormData.tags && bookFormData.tags.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 1,\n              display: 'flex',\n              gap: 0.5,\n              flexWrap: 'wrap'\n            },\n            children: bookFormData.tags.map((tag, index) => /*#__PURE__*/_jsxDEV(Chip, {\n              label: tag,\n              onDelete: () => {\n                setBookFormData({\n                  ...bookFormData,\n                  tags: bookFormData.tags.filter((_, i) => i !== index)\n                });\n              },\n              size: \"small\"\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            gutterBottom: true,\n            children: \"Age Range\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Min Age\",\n                type: \"number\",\n                value: bookFormData.ageRange.min,\n                onChange: e => setBookFormData({\n                  ...bookFormData,\n                  ageRange: {\n                    ...bookFormData.ageRange,\n                    min: parseInt(e.target.value)\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Max Age\",\n                type: \"number\",\n                value: bookFormData.ageRange.max,\n                onChange: e => setBookFormData({\n                  ...bookFormData,\n                  ageRange: {\n                    ...bookFormData.ageRange,\n                    max: parseInt(e.target.value)\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3,\n            display: 'flex',\n            justifyContent: 'flex-end',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setOpenBookDialog(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            children: selectedBook ? 'Save Changes' : 'Add Book'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 389,\n    columnNumber: 5\n  }, this);\n}\n_s2(AdminDashboard, \"y7EypSapPz4Ghbw+HLULqov4Soc=\");\n_c2 = AdminDashboard;\nexport default AdminDashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"VocabularyManagement\");\n$RefreshReg$(_c2, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Container","Typography","Box","Card","CardContent","Button","TextField","Grid","Tab","Tabs","IconButton","Chip","Upload","CircularProgress","Dialog","DialogTitle","DialogContent","DialogActions","Delete","Edit","Add","CloudUpload","GENRES","jsxDEV","_jsxDEV","Fragment","_Fragment","VocabularyManagement","_s","vocabularyWords","setVocabularyWords","loading","setLoading","openUploadDialog","setOpenUploadDialog","fetchVocabularyWords","response","fetch","headers","localStorage","getItem","data","json","error","console","handleDeleteWord","wordId","window","confirm","method","ok","sampleExcelFormat","children","sx","mb","display","justifyContent","variant","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","gutterBottom","style","backgroundColor","padding","borderRadius","whiteSpace","container","spacing","map","word","item","xs","alignItems","color","bookId","title","mt","definition","etymology","root","originLanguage","_id","open","onClose","component","type","hidden","accept","onChange","e","file","target","files","formData","FormData","append","body","_c","AdminDashboard","_s2","activeTab","setActiveTab","books","setBooks","openBookDialog","setOpenBookDialog","selectedBook","setSelectedBook","bookFormData","setBookFormData","author","description","genres","tags","tagInput","ageRange","min","max","stats","setStats","totalBooks","totalDrawings","activeUsers","fetchBooks","fetchStats","statsData","length","reduce","sum","book","_book$drawings","drawings","Set","flatMap","drawing","userId","size","booksPerAgeGroup","acc","range","log","handleBookSubmit","preventDefault","token","existingTags","Array","isArray","newTags","split","tag","trim","filter","allTags","dataToSend","url","JSON","stringify","text","Error","status","entries","alert","message","fullWidth","label","value","genre","margin","handleDeleteBook","maxWidth","newValue","_book$drawings2","md","onSubmit","p","required","multiline","rows","gap","flexWrap","_bookFormData$genres","_bookFormData$genres2","currentGenres","includes","g","helperText","index","onDelete","_","i","parseInt","_c2","$RefreshReg$"],"sources":["/Users/BrooksCole/Documents/reading-community/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["// frontend/src/pages/AdminDashboard.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Container,\n  Typography,\n  Box,\n  Card,\n  CardContent,\n  Button,\n  TextField,\n  Grid,\n  Tab,\n  Tabs,\n  IconButton,\n  Chip,\n  Upload,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from '@mui/material';\nimport { Delete, Edit, Add, CloudUpload, } from '@mui/icons-material';\nimport { GENRES } from '../constants/bookConstants';\n\nconst VocabularyManagement = () => {\n  const [vocabularyWords, setVocabularyWords] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [openUploadDialog, setOpenUploadDialog] = useState(false);\n  \n  useEffect(() => {\n    fetchVocabularyWords();\n  }, []);\n\n  const fetchVocabularyWords = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/vocabulary', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await response.json();\n      setVocabularyWords(data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching vocabulary:', error);\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteWord = async (wordId) => {\n    if (window.confirm('Are you sure you want to delete this word?')) {\n      try {\n        const response = await fetch(`http://localhost:3001/api/vocabulary/${wordId}`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.ok) {\n          fetchVocabularyWords();\n        }\n      } catch (error) {\n        console.error('Error deleting word:', error);\n      }\n    }\n  };\n\n  // Render a sample Excel format for users\n  const sampleExcelFormat = `\n    Word | Definition | Example Sentence\n    happy | feeling or showing pleasure | She was happy to see her friends.\n    brave | ready to face danger | The brave firefighter saved the cat.\n    curious | eager to learn | The curious student asked many questions.\n  `;\n\n  return (\n    <Box>\n      <Box sx={{ mb: 3, display: 'flex', justifyContent: 'space-between' }}>\n        <Button\n          variant=\"contained\"\n          startIcon={<Upload />}\n          onClick={() => setOpenUploadDialog(true)}\n        >\n          Upload Vocabulary (Excel/CSV)\n        </Button>\n      </Box>\n\n      {/* Sample Format Card */}\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>Sample Excel Format</Typography>\n          <pre style={{ \n            backgroundColor: '#f5f5f5', \n            padding: '1rem', \n            borderRadius: '4px',\n            whiteSpace: 'pre-wrap'\n          }}>\n            {sampleExcelFormat}\n          </pre>\n        </CardContent>\n      </Card>\n\n      {loading ? (\n        <CircularProgress />\n      ) : (\n        <Grid container spacing={3}>\n          {vocabularyWords.map((word) => (\n            <Grid item xs={12} key={word._id}>\n              <Card>\n                <CardContent>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\n                    <div>\n                      <Typography variant=\"h6\">{word.word}</Typography>\n                      <Typography color=\"textSecondary\">\n                        Book: {word.bookId ? word.bookId.title : 'N/A'}\n                      </Typography>\n                      <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                        Definition: {word.definition}\n                      </Typography>\n                      {word.etymology && (\n                        <Typography variant=\"body2\">\n                          Etymology: {word.etymology.root} ({word.etymology.originLanguage})\n                        </Typography>\n                      )}\n                    </div>\n                    <div>\n                      <IconButton \n                        onClick={() => handleDeleteWord(word._id)}\n                        color=\"error\"\n                      >\n                        <Delete />\n                      </IconButton>\n                    </div>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      )}\n\n      {/* Upload Dialog */}\n      <Dialog open={openUploadDialog} onClose={() => setOpenUploadDialog(false)}>\n        <DialogTitle>Upload Vocabulary</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body2\" gutterBottom sx={{ mt: 1 }}>\n            Upload an Excel file (.xlsx) or CSV file with your vocabulary words.\n            Please ensure it follows the format shown in the example above.\n          </Typography>\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            sx={{ mt: 2 }}\n          >\n            Choose File\n            <input\n              type=\"file\"\n              hidden\n              accept=\".xlsx,.csv\"\n              onChange={async (e) => {\n                const file = e.target.files[0];\n                if (file) {\n                  const formData = new FormData();\n                  formData.append('file', file);\n                  \n                  try {\n                    const response = await fetch('http://localhost:3001/api/vocabulary/upload', {\n                      method: 'POST',\n                      headers: {\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`\n                      },\n                      body: formData\n                    });\n                    \n                    if (response.ok) {\n                      setOpenUploadDialog(false);\n                      fetchVocabularyWords();\n                    }\n                  } catch (error) {\n                    console.error('Error uploading vocabulary:', error);\n                  }\n                }\n              }}\n            />\n          </Button>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenUploadDialog(false)}>Cancel</Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\n\n\nfunction AdminDashboard() {\n  const [activeTab, setActiveTab] = useState(0);\n  const [books, setBooks] = useState([]);\n  const [openBookDialog, setOpenBookDialog] = useState(false);\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [bookFormData, setBookFormData] = useState({\n    title: '',\n    author: '',\n    description: '',\n    genres: [],\n    tags: [],\n    tagInput: '',\n    ageRange: { min: 8, max: 15 }\n  });\n  const [stats, setStats] = useState({\n    totalBooks: 0,\n    totalDrawings: 0,\n    activeUsers: 0\n  });\n  \n  \n\n  // First, make fetchBooks a useCallback\n  const fetchBooks = useCallback(async () => {\n    try {\n      //console.log('Fetching books...');\n      const response = await fetch('http://localhost:3001/api/books');\n      const data = await response.json();\n      //console.log('Books fetched:', data);\n      setBooks(data);\n      //setLoading(false);\n    } catch (error) {\n      console.error('Error fetching books:', error);\n      //setError('Failed to load books');\n      //setLoading(false);\n    }\n  }, []); // Empty dependency array since it doesn't depend on state\n  \n  \n    const fetchStats = useCallback(async () => {\n      try {\n        // Calculate stats from books data\n        const statsData = {\n          totalBooks: books.length,\n          totalDrawings: books.reduce((sum, book) => sum + (book.drawings?.length || 0), 0),\n          activeUsers: new Set(books.flatMap(book => \n            (book.drawings || []).map(drawing => drawing.userId)\n          )).size,\n          booksPerAgeGroup: books.reduce((acc, book) => {\n            const range = `${book.ageRange.min}-${book.ageRange.max}`;\n            acc[range] = (acc[range] || 0) + 1;\n            return acc;\n          }, {})\n        };\n        \n        setStats(statsData);\n        console.log('Updated stats:', statsData); // Debug log\n      } catch (error) {\n        console.error('Error calculating stats:', error);\n      }\n    }, [books]);\n  \n  \n    // Make sure this useEffect is present\n    useEffect(() => {\n      fetchStats();\n    }, [books, fetchStats]);\n    useEffect(() => {\n          console.log('Starting to fetch books');\n          fetchBooks();\n        }, [fetchBooks]);\n  \n    const handleBookSubmit = async (e) => {\n      e.preventDefault();\n      try {\n        const token = localStorage.getItem('token');\n        console.log('Auth token:', token);\n        console.log('Selected book:', selectedBook);\n    \n        // Ensure bookFormData.tags is an array\n        const existingTags = Array.isArray(bookFormData.tags) ? bookFormData.tags : [];\n    \n        // Process the new tags\n        const newTags = bookFormData.tagInput\n          ? bookFormData.tagInput.split(',').map(tag => tag.trim()).filter(tag => tag)\n          : [];\n    \n        // Combine existing and new tags, remove duplicates\n        const allTags = [...new Set([...existingTags, ...newTags])];\n    \n        const dataToSend = {\n          ...bookFormData,\n          tags: allTags\n        };\n        delete dataToSend.tagInput;\n    \n        const url = selectedBook\n          ? `http://localhost:3001/api/books/${selectedBook._id}`\n          : 'http://localhost:3001/api/books';\n    \n        const method = selectedBook ? 'PUT' : 'POST';\n        console.log('Sending request:', {\n          url,\n          method,\n          data: dataToSend\n        });\n\n        // Before the fetch\n        console.log('About to send:', {\n          url,\n          method,\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          },\n          body: dataToSend\n        });\n        \n        const response = await fetch(url, {\n          method: method,\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          },\n          body: JSON.stringify(dataToSend)\n        });\n    \n    \n        if (!response.ok) {\n          const text = await response.text();\n          console.error('Server response:', text);\n          throw new Error(`Server error: ${text}`);\n        }\n    \n        const data = await response.json();\n        console.log('Success response:', data);\n\n        console.log('Response status:', response.status);\n        console.log('Response headers:', [...response.headers.entries()]);\n    \n        setOpenBookDialog(false);\n        fetchBooks();\n        setSelectedBook(null);\n        setBookFormData({\n          title: '',\n          author: '',\n          description: '',\n          genres: [],\n          tags: [],\n          tagInput: '',\n          ageRange: { min: 8, max: 15 }\n        });\n      } catch (error) {\n        console.error('Error saving book:', error);\n        alert('Failed to save book: ' + error.message);\n      }\n    };\n\n\n  // In your AdminDashboard.js, update the handleBookSubmit function:\n  \n  \n  // Add genre field to the dialog form:\n  <TextField\n    fullWidth\n    label=\"Genre\"\n    value={bookFormData.genre || ''}\n    onChange={(e) => setBookFormData({ ...bookFormData, genre: e.target.value })}\n    margin=\"normal\"\n  />\n\n  const handleDeleteBook = async (bookId) => {\n    if (window.confirm('Are you sure you want to delete this book?')) {\n      try {\n        const response = await fetch(`http://localhost:3001/api/books/${bookId}`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n\n        if (response.ok) {\n          fetchBooks();\n        }\n      } catch (error) {\n        console.error('Error deleting book:', error);\n      }\n    }\n  };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Admin Dashboard\n      </Typography>\n\n      <Tabs value={activeTab} onChange={(e, newValue) => setActiveTab(newValue)} sx={{ mb: 4 }}>\n        <Tab label=\"Books Management\" />\n        <Tab label=\"Statistics\" />\n        <Tab label=\"Content Moderation\" />\n        <Tab label=\"Vocabulary Management\" /> {/* Add this new tab */}\n      </Tabs>\n\n      {activeTab === 0 && (\n        <>\n          <Box sx={{ mb: 3 }}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Add />}\n              onClick={() => {\n                setSelectedBook(null);\n                setBookFormData({\n                  title: '',\n                  author: '',\n                  description: '',\n                  ageRange: { min: 8, max: 15 }\n                });\n                setOpenBookDialog(true);\n              }}\n            >\n              Add New Book\n            </Button>\n          </Box>\n\n          {activeTab === 3 && (\n            <Box>\n              <Typography variant=\"h5\" gutterBottom>Vocabulary Management</Typography>\n              <VocabularyManagement />\n            </Box>\n          )}\n\n          <Grid container spacing={3}>\n            {books.map((book) => (\n              <Grid item xs={12} md={6} key={book._id}>\n                <Card>\n                  <CardContent>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\n                      <div>\n                        <Typography variant=\"h6\">{book.title}</Typography>\n                        <Typography color=\"textSecondary\">{book.author}</Typography>\n                        <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                          Age Range: {book.ageRange.min}-{book.ageRange.max}\n                        </Typography>\n                        <Typography variant=\"body2\">\n                          Drawings: {book.drawings?.length || 0}\n                        </Typography>\n                      </div>\n                      <div>\n                        <IconButton\n                          onClick={() => {\n                            setSelectedBook(book);\n                            setBookFormData({\n                              title: book.title,\n                              author: book.author,\n                              description: book.description,\n                              genres: book.genres || [],\n                              tags: book.tags || [],\n                              ageRange: book.ageRange\n                            });\n                            setOpenBookDialog(true);\n                          }}\n                        >\n                          <Edit />\n                        </IconButton>\n                        <IconButton onClick={() => handleDeleteBook(book._id)} color=\"error\">\n                          <Delete />\n                        </IconButton>\n                      </div>\n                    </Box>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </>\n      )}\n\n      {activeTab === 1 && (\n        <Box>\n          <Typography variant=\"h5\" gutterBottom>Platform Statistics</Typography>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={4}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    Total Books\n                  </Typography>\n                  <Typography variant=\"h4\">{stats.totalBooks}</Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    Total Drawings\n                  </Typography>\n                  <Typography variant=\"h4\">{stats.totalDrawings}</Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    Active Users\n                  </Typography>\n                  <Typography variant=\"h4\">{stats.activeUsers}</Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </Box>\n      )}\n\n      {/* Book Dialog */}\n      <Dialog open={openBookDialog} onClose={() => setOpenBookDialog(false)} maxWidth=\"sm\" fullWidth>\n        <Box component=\"form\" onSubmit={handleBookSubmit} sx={{ p: 3 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            {selectedBook ? 'Edit Book' : 'Add New Book'}\n          </Typography>\n          <TextField\n            fullWidth\n            label=\"Title\"\n            value={bookFormData.title}\n            onChange={(e) => setBookFormData({ ...bookFormData, title: e.target.value })}\n            margin=\"normal\"\n            required\n          />\n          <TextField\n            fullWidth\n            label=\"Author\"\n            value={bookFormData.author}\n            onChange={(e) => setBookFormData({ ...bookFormData, author: e.target.value })}\n            margin=\"normal\"\n            required\n          />\n          <TextField\n            fullWidth\n            label=\"Description\"\n            value={bookFormData.description}\n            onChange={(e) => setBookFormData({ ...bookFormData, description: e.target.value })}\n            margin=\"normal\"\n            multiline\n            rows={3}\n          />\n          {/* Genre Selection */}\n          <Box sx={{ mt: 2 }}>\n            <Typography variant=\"subtitle1\" gutterBottom>Genres</Typography>\n            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n              {GENRES.map((genre) => (\n                <Chip\n                  key={genre}\n                  label={genre}\n                  onClick={() => {\n                    const currentGenres = bookFormData.genres || [];\n                    if (currentGenres.includes(genre)) {\n                      setBookFormData({\n                        ...bookFormData,\n                        genres: currentGenres.filter(g => g !== genre)\n                      });\n                    } else {\n                      setBookFormData({\n                        ...bookFormData,\n                        genres: [...currentGenres, genre]\n                      });\n                    }\n                  }}\n                  color={bookFormData.genres?.includes(genre) ? \"primary\" : \"default\"}\n                  variant={bookFormData.genres?.includes(genre) ? \"filled\" : \"outlined\"}\n                />\n              ))}\n            </Box>\n          </Box>\n          \n          {/* Tags Input */}\n          <Box sx={{ mt: 2 }}>\n            <Typography variant=\"subtitle1\" gutterBottom>Tags</Typography>\n            <TextField\n              fullWidth\n              label=\"Add tags (comma-separated)\"\n              value={bookFormData.tagInput || ''}\n              onChange={(e) => {\n                setBookFormData({\n                  ...bookFormData,\n                  tagInput: e.target.value\n                });\n              }}\n              helperText=\"Enter new tags separated by commas, they will be added when you save\"\n            />\n            {bookFormData.tags && bookFormData.tags.length > 0 && (\n              <Box sx={{ mt: 1, display: 'flex', gap: 0.5, flexWrap: 'wrap' }}>\n                {bookFormData.tags.map((tag, index) => (\n                  <Chip\n                    key={index}\n                    label={tag}\n                    onDelete={() => {\n                      setBookFormData({\n                        ...bookFormData,\n                        tags: bookFormData.tags.filter((_, i) => i !== index)\n                      });\n                    }}\n                    size=\"small\"\n                  />\n                ))}\n              </Box>\n            )}\n          </Box>\n          <Box sx={{ mt: 2 }}>\n            <Typography variant=\"subtitle1\" gutterBottom>Age Range</Typography>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  label=\"Min Age\"\n                  type=\"number\"\n                  value={bookFormData.ageRange.min}\n                  onChange={(e) => setBookFormData({\n                    ...bookFormData,\n                    ageRange: { ...bookFormData.ageRange, min: parseInt(e.target.value) }\n                  })}\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  label=\"Max Age\"\n                  type=\"number\"\n                  value={bookFormData.ageRange.max}\n                  onChange={(e) => setBookFormData({\n                    ...bookFormData,\n                    ageRange: { ...bookFormData.ageRange, max: parseInt(e.target.value) }\n                  })}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n          <Box sx={{ mt: 3, display: 'flex', justifyContent: 'flex-end', gap: 2 }}>\n            <Button onClick={() => setOpenBookDialog(false)}>Cancel</Button>\n            <Button type=\"submit\" variant=\"contained\">\n              {selectedBook ? 'Save Changes' : 'Add Book'}\n            </Button>\n          </Box>\n        </Box>\n      </Dialog>\n    </Container>\n  );\n}\n\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}