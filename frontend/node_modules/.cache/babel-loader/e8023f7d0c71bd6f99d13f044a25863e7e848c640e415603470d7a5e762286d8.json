{"ast":null,"code":"// frontend/src/components/GifPicker.js\nimport React,{useState,useEffect}from'react';import{Dialog,DialogTitle,DialogContent,TextField,Grid,Box,IconButton,CircularProgress,Typography}from'@mui/material';import{Close as CloseIcon,Search as SearchIcon}from'@mui/icons-material';import{api}from'../services/api';// Add this import at the top\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GifPicker=_ref=>{let{open,onClose,onSelect}=_ref;const[searchTerm,setSearchTerm]=useState('');const[gifs,setGifs]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleGifSelect=gif=>{var _gif$media_formats,_gif$media_formats$gi;// Make sure we're accessing the correct URL property\nconst gifUrl=((_gif$media_formats=gif.media_formats)===null||_gif$media_formats===void 0?void 0:(_gif$media_formats$gi=_gif$media_formats.gif)===null||_gif$media_formats$gi===void 0?void 0:_gif$media_formats$gi.url)||gif.url;if(!gifUrl){console.error('No valid URL found in GIF data:',gif);return;}onSelect({...gif,url:gifUrl});};//fetch gifs & send requeest to services/api.js\nconst fetchGifs=async query=>{setLoading(true);setError(null);try{const data=query?await api.searchGifs(query):await api.getTrendingGifs();setGifs(data);}catch(err){console.error('GIF fetch error:',err);setError('Failed to load GIFs');}finally{setLoading(false);}};useEffect(()=>{if(open){fetchGifs('');// Load trending GIFs when opened\n}},[open]);const handleSearch=e=>{e.preventDefault();if(searchTerm.trim()){fetchGifs(searchTerm);}};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Typography,{children:\"Select a GIF\"}),/*#__PURE__*/_jsx(IconButton,{onClick:onClose,size:\"small\",children:/*#__PURE__*/_jsx(CloseIcon,{})})]})}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSearch,sx:{mb:2},children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Search GIFs...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),InputProps:{endAdornment:/*#__PURE__*/_jsx(IconButton,{type:\"submit\",children:/*#__PURE__*/_jsx(SearchIcon,{})})}})}),loading?/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",p:3,children:/*#__PURE__*/_jsx(CircularProgress,{})}):error?/*#__PURE__*/_jsx(Typography,{color:\"error\",align:\"center\",children:error}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:gifs.map((gif,index)=>{var _gif$media_formats2,_gif$media_formats2$t,_gif$media_formats3,_gif$media_formats3$g;return/*#__PURE__*/_jsx(Grid,{item:true,xs:6,sm:4,md:3,children:/*#__PURE__*/_jsx(Box,{component:\"img\",src:((_gif$media_formats2=gif.media_formats)===null||_gif$media_formats2===void 0?void 0:(_gif$media_formats2$t=_gif$media_formats2.tinygif)===null||_gif$media_formats2$t===void 0?void 0:_gif$media_formats2$t.url)||((_gif$media_formats3=gif.media_formats)===null||_gif$media_formats3===void 0?void 0:(_gif$media_formats3$g=_gif$media_formats3.gif)===null||_gif$media_formats3$g===void 0?void 0:_gif$media_formats3$g.url),alt:gif.content_description||'GIF',sx:{width:'100%',height:'auto',cursor:'pointer',borderRadius:1,'&:hover':{opacity:0.8}},onClick:()=>{handleGifSelect(gif);onClose();},onError:e=>{console.error('Failed to load GIF:',gif);e.target.style.display='none';}})},index);})})]})]});};export default GifPicker;","map":{"version":3,"names":["React","useState","useEffect","Dialog","DialogTitle","DialogContent","TextField","Grid","Box","IconButton","CircularProgress","Typography","Close","CloseIcon","Search","SearchIcon","api","jsx","_jsx","jsxs","_jsxs","GifPicker","_ref","open","onClose","onSelect","searchTerm","setSearchTerm","gifs","setGifs","loading","setLoading","error","setError","handleGifSelect","gif","_gif$media_formats","_gif$media_formats$gi","gifUrl","media_formats","url","console","fetchGifs","query","data","searchGifs","getTrendingGifs","err","handleSearch","e","preventDefault","trim","maxWidth","fullWidth","children","display","alignItems","justifyContent","onClick","size","component","onSubmit","sx","mb","placeholder","value","onChange","target","InputProps","endAdornment","type","p","color","align","container","spacing","map","index","_gif$media_formats2","_gif$media_formats2$t","_gif$media_formats3","_gif$media_formats3$g","item","xs","sm","md","src","tinygif","alt","content_description","width","height","cursor","borderRadius","opacity","onError","style"],"sources":["/Users/BrooksCole/Documents/reading-community/frontend/src/components/GifPicker.js"],"sourcesContent":["// frontend/src/components/GifPicker.js\nimport React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  Grid,\n  Box,\n  IconButton,\n  CircularProgress,\n  Typography\n} from '@mui/material';\nimport { Close as CloseIcon, Search as SearchIcon } from '@mui/icons-material';\nimport { api } from '../services/api';  // Add this import at the top\n\nconst GifPicker = ({ open, onClose, onSelect }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [gifs, setGifs] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleGifSelect = (gif) => {\n    // Make sure we're accessing the correct URL property\n    const gifUrl = gif.media_formats?.gif?.url || gif.url;\n    if (!gifUrl) {\n      console.error('No valid URL found in GIF data:', gif);\n      return;\n    }\n    onSelect({ ...gif, url: gifUrl });\n  };\n\n//fetch gifs & send requeest to services/api.js\n  const fetchGifs = async (query) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = query \n        ? await api.searchGifs(query)\n        : await api.getTrendingGifs();\n      setGifs(data);\n    } catch (err) {\n      console.error('GIF fetch error:', err);\n      setError('Failed to load GIFs');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n    useEffect(() => {\n      if (open) {\n        fetchGifs('');  // Load trending GIFs when opened\n      }\n    }, [open]);\n\n    const handleSearch = (e) => {\n      e.preventDefault();\n      if (searchTerm.trim()) {\n        fetchGifs(searchTerm);\n      }\n    };\n\n  return (\n    <Dialog \n      open={open} \n      onClose={onClose}\n      maxWidth=\"md\"\n      fullWidth\n    >\n      <DialogTitle>\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\n          <Typography>Select a GIF</Typography>\n          <IconButton onClick={onClose} size=\"small\">\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </DialogTitle>\n      \n      <DialogContent>\n        <Box component=\"form\" onSubmit={handleSearch} sx={{ mb: 2 }}>\n          <TextField\n            fullWidth\n            placeholder=\"Search GIFs...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            InputProps={{\n              endAdornment: (\n                <IconButton type=\"submit\">\n                  <SearchIcon />\n                </IconButton>\n              )\n            }}\n          />\n        </Box>\n\n        {loading ? (\n          <Box display=\"flex\" justifyContent=\"center\" p={3}>\n            <CircularProgress />\n          </Box>\n        ) : error ? (\n          <Typography color=\"error\" align=\"center\">{error}</Typography>\n        ) : (\n          <Grid container spacing={2}>\n            {gifs.map((gif, index) => (\n              <Grid item xs={6} sm={4} md={3} key={index}>\n                <Box \n                  component=\"img\"\n                  src={gif.media_formats?.tinygif?.url || gif.media_formats?.gif?.url}\n                  alt={gif.content_description || 'GIF'}\n                  sx={{\n                    width: '100%',\n                    height: 'auto',\n                    cursor: 'pointer',\n                    borderRadius: 1,\n                    '&:hover': {\n                      opacity: 0.8\n                    }\n                  }}\n                  onClick={() => {\n                    handleGifSelect(gif);\n                    onClose();\n                  }}\n                  onError={(e) => {\n                    console.error('Failed to load GIF:', gif);\n                    e.target.style.display = 'none';\n                  }}\n                />\n              </Grid>\n            ))}\n          </Grid>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default GifPicker;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}