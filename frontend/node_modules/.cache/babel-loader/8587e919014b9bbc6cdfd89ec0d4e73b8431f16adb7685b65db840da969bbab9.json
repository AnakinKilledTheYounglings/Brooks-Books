{"ast":null,"code":"// frontend/src/pages/Home.js\nimport React,{useState,useEffect}from'react';import{Container,Typography,Box,Grid,Card,CardContent,CardMedia,Button,Paper}from'@mui/material';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const navigate=useNavigate();const[recentActivity,setRecentActivity]=useState([]);const[topReaders,setTopReaders]=useState([]);const[isLoggedIn]=useState(!!localStorage.getItem('token'));useEffect(()=>{fetchRecentActivity();fetchTopReaders();},[]);const fetchRecentActivity=async()=>{try{const response=await fetch('http://localhost:3001/api/books');const books=await response.json();const activity=books.flatMap(book=>book.drawings.map(drawing=>({...drawing,bookTitle:book.title}))).sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt)).slice(0,6);setRecentActivity(activity);}catch(error){console.error('Error fetching activity:',error);}};const fetchTopReaders=async()=>{try{const response=await fetch('http://localhost:3001/api/users/top');const users=await response.json();setTopReaders(users);}catch(error){console.error('Error fetching top readers:',error);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",children:[/*#__PURE__*/_jsxs(Box,{sx:{pt:8,pb:6,textAlign:'center',bgcolor:'background.paper',borderRadius:2,mb:4},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h2\",color:\"text.primary\",gutterBottom:true,children:\"Welcome to Reading Community!\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",paragraph:true,children:\"Share your reading journey through art! Read books, create drawings, and join a community of young readers and artists.\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:4},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",size:\"large\",onClick:()=>navigate('/books'),sx:{mr:2},children:\"Browse Books\"}),!isLoggedIn&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",size:\"large\",onClick:()=>navigate('/register'),children:\"Join Now\"})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,sx:{mt:6},children:\"Recent Drawings\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:recentActivity.map((activity,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"200\",image:activity.imageUrl,alt:`Drawing for ${activity.bookTitle}`}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:activity.bookTitle}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"by \",activity.username]})]})]})},index))}),/*#__PURE__*/_jsxs(Paper,{sx:{p:4,mt:6},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"How It Works\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"1. Read a Book\"}),/*#__PURE__*/_jsx(Typography,{children:\"Choose from our collection of age-appropriate books\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"2. Draw Your Favorite Scene\"}),/*#__PURE__*/_jsx(Typography,{children:\"Share your interpretation through artwork\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"3. Earn Points & Share\"}),/*#__PURE__*/_jsx(Typography,{children:\"Get recognition and interact with other readers\"})]})})]})]})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","Box","Grid","Card","CardContent","CardMedia","Button","Paper","useNavigate","jsx","_jsx","jsxs","_jsxs","Home","navigate","recentActivity","setRecentActivity","topReaders","setTopReaders","isLoggedIn","localStorage","getItem","fetchRecentActivity","fetchTopReaders","response","fetch","books","json","activity","flatMap","book","drawings","map","drawing","bookTitle","title","sort","a","b","Date","createdAt","slice","error","console","users","maxWidth","children","sx","pt","pb","textAlign","bgcolor","borderRadius","mb","component","variant","color","gutterBottom","paragraph","mt","size","onClick","mr","container","spacing","index","item","xs","sm","md","height","image","imageUrl","alt","username","p"],"sources":["/Users/BrooksCole/Documents/reading-community/frontend/src/pages/Home.js"],"sourcesContent":["// frontend/src/pages/Home.js\nimport React, { useState, useEffect } from 'react';\nimport { \n  Container, \n  Typography, \n  Box, \n  Grid, \n  Card, \n  CardContent, \n  CardMedia,\n  Button,\n  Paper\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\n\nfunction Home() {\n  const navigate = useNavigate();\n  const [recentActivity, setRecentActivity] = useState([]);\n  const [topReaders, setTopReaders] = useState([]);\n  const [isLoggedIn] = useState(!!localStorage.getItem('token'));\n\n  useEffect(() => {\n    fetchRecentActivity();\n    fetchTopReaders();\n  }, []);\n\n  const fetchRecentActivity = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/books');\n      const books = await response.json();\n      const activity = books\n        .flatMap(book => book.drawings.map(drawing => ({\n          ...drawing,\n          bookTitle: book.title\n        })))\n        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\n        .slice(0, 6);\n      setRecentActivity(activity);\n    } catch (error) {\n      console.error('Error fetching activity:', error);\n    }\n  };\n\n  const fetchTopReaders = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/users/top');\n      const users = await response.json();\n      setTopReaders(users);\n    } catch (error) {\n      console.error('Error fetching top readers:', error);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"lg\">\n      {/* Hero Section */}\n      <Box\n        sx={{\n          pt: 8,\n          pb: 6,\n          textAlign: 'center',\n          bgcolor: 'background.paper',\n          borderRadius: 2,\n          mb: 4\n        }}\n      >\n        <Typography\n          component=\"h1\"\n          variant=\"h2\"\n          color=\"text.primary\"\n          gutterBottom\n        >\n          Welcome to Reading Community!\n        </Typography>\n        <Typography variant=\"h5\" color=\"text.secondary\" paragraph>\n          Share your reading journey through art! Read books, create drawings,\n          and join a community of young readers and artists.\n        </Typography>\n        <Box sx={{ mt: 4 }}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={() => navigate('/books')}\n            sx={{ mr: 2 }}\n          >\n            Browse Books\n          </Button>\n          {!isLoggedIn && (\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={() => navigate('/register')}\n            >\n              Join Now\n            </Button>\n          )}\n        </Box>\n      </Box>\n\n      {/* Recent Activity */}\n      <Typography variant=\"h4\" gutterBottom sx={{ mt: 6 }}>\n        Recent Drawings\n      </Typography>\n      <Grid container spacing={3}>\n        {recentActivity.map((activity, index) => (\n          <Grid item xs={12} sm={6} md={4} key={index}>\n            <Card>\n              <CardMedia\n                component=\"img\"\n                height=\"200\"\n                image={activity.imageUrl}\n                alt={`Drawing for ${activity.bookTitle}`}\n              />\n              <CardContent>\n                <Typography variant=\"subtitle1\" gutterBottom>\n                  {activity.bookTitle}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  by {activity.username}\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {/* How It Works */}\n      <Paper sx={{ p: 4, mt: 6 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          How It Works\n        </Typography>\n        <Grid container spacing={4}>\n          <Grid item xs={12} md={4}>\n            <Box textAlign=\"center\">\n              <Typography variant=\"h6\" gutterBottom>\n                1. Read a Book\n              </Typography>\n              <Typography>\n                Choose from our collection of age-appropriate books\n              </Typography>\n            </Box>\n          </Grid>\n          <Grid item xs={12} md={4}>\n            <Box textAlign=\"center\">\n              <Typography variant=\"h6\" gutterBottom>\n                2. Draw Your Favorite Scene\n              </Typography>\n              <Typography>\n                Share your interpretation through artwork\n              </Typography>\n            </Box>\n          </Grid>\n          <Grid item xs={12} md={4}>\n            <Box textAlign=\"center\">\n              <Typography variant=\"h6\" gutterBottom>\n                3. Earn Points & Share\n              </Typography>\n              <Typography>\n                Get recognition and interact with other readers\n              </Typography>\n            </Box>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Container>\n  );\n}\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}