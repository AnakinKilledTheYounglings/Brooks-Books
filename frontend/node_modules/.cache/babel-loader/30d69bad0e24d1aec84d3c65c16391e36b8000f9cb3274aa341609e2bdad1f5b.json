{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{Container,Typography,Box,Paper,Grid,Chip,CircularProgress}from'@mui/material';import DrawingCard from'../components/DrawingCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookDetail(){var _book$genres,_book$drawings,_book$drawings2;const{bookId}=useParams();const[book,setBook]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const fetchBookDetails=async()=>{try{setLoading(true);const response=await fetch(`http://localhost:3001/api/books/${bookId}`);if(!response.ok){throw new Error('Book not found');}const data=await response.json();setBook(data);}catch(err){setError(err.message);}finally{setLoading(false);}};useEffect(()=>{fetchBookDetails();},[bookId]);// Add bookId as dependency\nif(loading){return/*#__PURE__*/_jsx(Container,{sx:{mt:4,display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})});}if(!book){return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsx(Typography,{children:\"Book not found\"})});}return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",sx:{mt:4},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:book.title}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:[\"by \",book.author]}),/*#__PURE__*/_jsx(Box,{sx:{my:2},children:(_book$genres=book.genres)===null||_book$genres===void 0?void 0:_book$genres.map(genre=>/*#__PURE__*/_jsx(Chip,{label:genre,sx:{mr:1,mb:1},variant:\"outlined\"},genre))}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",paragraph:true,children:book.description}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{mt:4,mb:2},children:\"Drawings\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[(_book$drawings=book.drawings)===null||_book$drawings===void 0?void 0:_book$drawings.map((drawing,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(DrawingCard,{drawing:drawing,bookId:book._id,onLikeUpdate:fetchBookDetails// Now this will work\n})},index)),!((_book$drawings2=book.drawings)!==null&&_book$drawings2!==void 0&&_book$drawings2.length)&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"No drawings yet for this book.\"})})]})]})});}export default BookDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Container","Typography","Box","Paper","Grid","Chip","CircularProgress","DrawingCard","jsx","_jsx","jsxs","_jsxs","BookDetail","_book$genres","_book$drawings","_book$drawings2","bookId","book","setBook","loading","setLoading","error","setError","fetchBookDetails","response","fetch","ok","Error","data","json","err","message","sx","mt","display","justifyContent","children","color","maxWidth","elevation","p","variant","gutterBottom","title","author","my","genres","map","genre","label","mr","mb","paragraph","description","container","spacing","drawings","drawing","index","item","xs","md","_id","onLikeUpdate","length"],"sources":["/Users/BrooksCole/Documents/reading-community/frontend/src/pages/BookDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { \n  Container, \n  Typography, \n  Box, \n  Paper,\n  Grid,\n  Chip,\n  CircularProgress\n} from '@mui/material';\nimport DrawingCard from '../components/DrawingCard';\n\nfunction BookDetail() {\n  const { bookId } = useParams();\n  const [book, setBook] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const fetchBookDetails = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`http://localhost:3001/api/books/${bookId}`);\n      if (!response.ok) {\n        throw new Error('Book not found');\n      }\n      const data = await response.json();\n      setBook(data);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchBookDetails();\n  }, [bookId]); // Add bookId as dependency\n\n  if (loading) {\n    return (\n      <Container sx={{ mt: 4, display: 'flex', justifyContent: 'center' }}>\n        <CircularProgress />\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container sx={{ mt: 4 }}>\n        <Typography color=\"error\">{error}</Typography>\n      </Container>\n    );\n  }\n\n  if (!book) {\n    return (\n      <Container sx={{ mt: 4 }}>\n        <Typography>Book not found</Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\n      <Paper elevation={3} sx={{ p: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          {book.title}\n        </Typography>\n        <Typography variant=\"h6\" color=\"textSecondary\" gutterBottom>\n          by {book.author}\n        </Typography>\n\n        <Box sx={{ my: 2 }}>\n          {book.genres?.map((genre) => (\n            <Chip\n              key={genre}\n              label={genre}\n              sx={{ mr: 1, mb: 1 }}\n              variant=\"outlined\"\n            />\n          ))}\n        </Box>\n\n        <Typography variant=\"body1\" paragraph>\n          {book.description}\n        </Typography>\n\n        <Typography variant=\"h6\" sx={{ mt: 4, mb: 2 }}>\n          Drawings\n        </Typography>\n        <Grid container spacing={2}>\n          {book.drawings?.map((drawing, index) => (\n            <Grid item xs={12} md={6} key={index}>\n              <DrawingCard\n                drawing={drawing}\n                bookId={book._id}\n                onLikeUpdate={fetchBookDetails} // Now this will work\n              />\n            </Grid>\n          ))}\n          {!book.drawings?.length && (\n            <Grid item xs={12}>\n              <Typography color=\"textSecondary\">\n                No drawings yet for this book.\n              </Typography>\n            </Grid>\n          )}\n        </Grid>\n      </Paper>\n    </Container>\n  );\n}\n\nexport default BookDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}